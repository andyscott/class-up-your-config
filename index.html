<html>
  <head>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/xterm.css"/>
    <script src="js/xterm.js"></script>
    <script src="js/xterm/fit.js"></script>
  </head>
  <body>

    <div id="watermark">
      <img src="img/47deg.png" style="width: 60px; height: auto; opacity: 0.7;"/>
    </div>

    <div class="reveal">
      <div class="slides">

        <section>
          <img src="img/navbar_brand2x.png" class="plain"/>
          <h3>class up your config</h3>
          <div><a href="https://twitter.com/andygscott">@andygscott</a> <a href="https://twitter.com/47deg">@47deg</a></div>
        </section>


        <section>
          <h2>what is config?</h2>
        </section>

        <section>
          <h3>this...</h3>
          <pre><code data-trim data-noescape>
            [unix_http_server]
            file=/tmp/supervisor.sock                       ; path to your socket file

            [supervisord]
            logfile=/var/log/supervisord/supervisord.log    ; supervisord log file
            logfile_maxbytes=50MB                           ; maximum size of logfile before rotation
            logfile_backups=10                              ; number of backed up logfiles
            loglevel=error                                  ; info, debug, warn, trace
            pidfile=/var/run/supervisord.pid                ; pidfile location
            nodaemon=false                                  ; run supervisord as a daemon
            minfds=1024                                     ; number of startup file descriptors
            minprocs=200                                    ; number of process descriptors
            user=root                                       ; default user
            childlogdir=/var/log/supervisord/               ; where child log files will live

            [rpcinterface:supervisor]
            supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
          </code></pre>
        </section>

        <section>
          <h3>and this...</h3>
          <pre><code data-trim data-noescape>
            unstarted-push-timeout = 10s

            typed {
              # Default timeout for typed actor methods with non-void return type
              timeout = 5s
            }

            # Mapping between Â´deployment.router' short names to fully qualified class names
            router.type-mapping {
              from-code = "akka.routing.NoRouter"
              round-robin-pool = "akka.routing.RoundRobinPool"
              round-robin-group = "akka.routing.RoundRobinGroup"
              random-pool = "akka.routing.RandomPool"
              random-group = "akka.routing.RandomGroup"
              balancing-pool = "akka.routing.BalancingPool"
              smallest-mailbox-pool = "akka.routing.SmallestMailboxPool"
              broadcast-pool = "akka.routing.BroadcastPool"
              broadcast-group = "akka.routing.BroadcastGroup"
              scatter-gather-pool = "akka.routing.ScatterGatherFirstCompletedPool"
              scatter-gather-group = "akka.routing.ScatterGatherFirstCompletedGroup"
              tail-chopping-pool = "akka.routing.TailChoppingPool"
              tail-chopping-group = "akka.routing.TailChoppingGroup"
              consistent-hashing-pool = "akka.routing.ConsistentHashingPool"
              consistent-hashing-group = "akka.routing.ConsistentHashingGroup"
            }
          </code></pre>
        </section>


        <section>
          <h3>...or this</h3>

          <pre><code data-trim data-noescape>
            : ${JAVA_OPTIONS:=-Xmx4G -XX:+UseG1GC -XX:ReservedCodeCacheSize=900m \
              -Xss1M -XX:+CMSClassUnloadingEnabled}
            : ${JAVA_PROPERTIES:=-Dsbt.ivy.home=$SBT_DIR/ivy2 \
              -Dsbt.boot.directory=$SBT_DIR/boot -Dsbt.log.format=false \
              -Dsbt.ivy.home=$SBT_DIR/plugins}
            java $JAVA_OPTIONS $JAVA_PROPERTIES -jar $SBT_JAR "$@"
          </code></pre>

          <pre><code data-trim data-noescape>
            application.url = "http://localhost:9000"

            play.evolutions.db.default.autoApply=true

            db.default.driver=org.postgresql.Driver
            db.default.url="jdbc:postgresql://localhost:5432/scalaexercises_dev"
            db.default.username=scalaexercises_dev_user
            db.default.password=scalaexercises_pass
            db.default.url=${?DATABASE_URL}
          </code></pre>

        </section>

        <section id="burn">
          <h3>ðŸ”¥ðŸ”¥ and this ðŸ”¥ðŸ”¥</h3>
          <pre><code data-trim data-noescape>
            com.typesafe.config.ConfigException$Missing: No configuration setting found for key 'mongo-async-driver'
              at com.typesafe.config.impl.SimpleConfig.findKey(SimpleConfig.java:115)
              at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:136)
              at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:150)
              at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:155)
              at com.typesafe.config.impl.SimpleConfig.getObject(SimpleConfig.java:209)
              at com.typesafe.config.impl.SimpleConfig.getConfig(SimpleConfig.java:215)
              at com.typesafe.config.impl.SimpleConfig.getConfig(SimpleConfig.java:33)
              at reactivemongo.api.MongoDriver$.reactivemongo$api$MongoDriver$$defaultSystem(api.scala:268)
              at reactivemongo.api.MongoDriver$$anonfun$3.apply(api.scala:231)
              at reactivemongo.api.MongoDriver$$anonfun$3.apply(api.scala:231)
              at scala.Option.getOrElse(Option.scala:120)
              at reactivemongo.api.MongoDriver.<init>(api.scala:231)
              at play.modules.reactivemongo.ReactiveMongoHelper.driver$lzycompute(ReactiveMongoPlugin.scala:138)
              at play.modules.reactivemongo.ReactiveMongoHelper.driver(ReactiveMongoPlugin.scala:138)
              at play.modules.reactivemongo.ReactiveMongoHelper.connection$lzycompute(ReactiveMongoPlugin.scala:141)
              at play.modules.reactivemongo.ReactiveMongoHelper.connection(ReactiveMongoPlugin.scala:139)
              at play.modules.reactivemongo.ReactiveMongoHelper.db$lzycompute(ReactiveMongoPlugin.scala:143)
              at play.modules.reactivemongo.ReactiveMongoHelper.db(ReactiveMongoPlugin.scala:143)
              at play.modules.reactivemongo.ReactiveMongoPlugin$.db(ReactiveMongoPlugin.scala:76)
          </code></pre>
        </section>


        <section id="meh">
          <pre><code data-trim data-noescape>
            trait AkkaClientConfig extends Config {
              protected val akkaConfig = config.getConfig("akka.http.client")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
            }
            trait KafkaConfig extends Config {
              protected val kafkaConfig = config.getConfig("kafka")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
            }

            object ServiceConfig extends AkkaServerConfig {
              protected val http = akkaConfig.getConfig("server")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
              val host = http.getString("host")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
              val port = http.getInt("port")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
              val requestTimeout = http.getString("request-timeout")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
              val systemName = http.getString("system")<span class="fragment" data-fragment-index="1">ðŸ”¥</span>
            }
          </code></pre>
        </section>

        <section>
          What is case classy?
        </section>


        <section>
          Slide 1
          <div id="terminal" style="width:600px; height: 400px; background-color: blue"/>
          <div class="fragment" id="frag1">frag 1</div>
          <script class="fragment" id="frag2"></script>
          <div class="fragment" id="frag3">frag 3</div>
        </section>
        <section>Slide 2</section>
        <section>
          Slide 3
          <!-- http://stackoverflow.com/questions/38187779/stepping-through-a-video-file-with-reveal-js?rq=1 -->
        </section>
      </div>
    </div>
    <script src="js/reveal.js"></script>
    <script>

      var onHide = [];
      var onShow = [];

      var term = null;

      onShow['frag1'] = function() { term.writeln('Hello $ ') };
      onShow['frag2'] = function() { term.write('Hello from \033[1;3;31mxterm.js\033[0m $ ') };



      Reveal.addEventListener('fragmentshown', function(event) {
        console.log(event.fragment.id);
        action = onShow[event.fragment.id];
        if (action) action();
      });
      Reveal.addEventListener('fragmenthidden', function(event) {
        console.log(event.fragment.id);
      });

      term = new Terminal({
        cursorBlink: true
      });
      term.open(document.getElementById('terminal'));

      Reveal.addEventListener('ready', function(event) {
        term.fit();
        term.on('focus', function() { term.blur(); });
        term.focus();
      });

      Reveal.initialize({
        transition: 'none'
      });

    </script>
  </body>
</html>
